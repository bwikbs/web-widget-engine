<?xml version="1.0" encoding="UTF-8"?>
<!--
// TODO -> implement units(color, length(px, dp, %...))
        -> implement container(Element-> Container? Layout? some thing
-->
<Document>
    <Text
        id = "hour1"
        textSize = "48"
        x = "60"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "hour2"
        textSize = "48"
        x = "90"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        textSize = "48"
        x = "120"
        y = "45"
        width="20"
        height="40"
        text = ":"
    />
    <Text
        id = "min1"
        textSize = "48"
        x = "140"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "min2"
        textSize = "48"
        x = "170"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        textSize = "48"
        x = "200"
        y = "45"
        width="20"
        height="40"
        text = ":"
    />
    <Text
        id = "sec1"
        textSize = "48"
        x = "220"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "sec2"
        textSize = "48"
        x = "250"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Image
        id="sun"
        src = "test/sun.png"
        x = "55"
        y = "110"
        width = "240"
        height = "205"
    />
    <Script>
        <![CDATA[
        
        var running = true;
        
        function textSetter(a1, a2, time) {
            a1.text = parseInt(time / 10);
            a2.text = time % 10;
        }
        function timeoutHander() {
            // print("timeout")
            
            var d = new Date();
            textSetter(document.getElementById("hour1"), document.getElementById("hour2"), d.getHours());
            textSetter(document.getElementById("min1"), document.getElementById("min2"), d.getMinutes());
            textSetter(document.getElementById("sec1"), document.getElementById("sec2"), d.getSeconds());
            print(running+"asdf")
            if (running) {
                window.setTimeout(timeoutHander, 500);
            }
        }
        
        timeoutHander();
        
        function ani() {
            var t = new Date();
            t = t.valueOf()
            t = t % 1000000
            // t = t % 3600
            // print(t)
            document.getElementById("sun").angle = t/80;
            
            var now = Date.now();
            var c = 500;
            if (now - startTime > c) {
                document.getElementById("sun").scale = 1;
            } else 
                document.getElementById("sun").scale = 1 + Math.sin( ((now - startTime) / c * 180) * Math.PI / 180) * 0.25;
            
            if (running)
                window.setTimeout(ani, 13);
        }
        
        var startTime = Date.now()
        
        document.getElementById("sun").onClick = function() {
            startTime = Date.now();
        }
        
        ani()
        
        window.onResume = function() {
            running = true;
            ani();
            timeoutHander();
        }
        
        window.onPause = function() {
            running = false;
        }
        
        ]]>
    </Script>
</Document>
