<!DOCTYPE html>
<html>
<head>
<!--script src="../HTMLLinkElement/resources/link-load-utilities.js"></script-->
<script>
function test_end()
{
  try {
      wptTestEnd();
  } catch(e) {
      console.log(e);
  }
}

var numberOfFiredLoadEvents = 0;
var expectedNumberOfFiredLoadEvents = 2;

function checkIfDone(elementName)
{
  ++numberOfFiredLoadEvents;

  if (numberOfFiredLoadEvents < expectedNumberOfFiredLoadEvents && elementName === 'body') {
  	console.log("FAIL Fired window Load event before style Load events.");
    test_end();
    // log("FAIL Fired window Load event before style Load events.");
    // testFinished();
  }
  if (numberOfFiredLoadEvents === expectedNumberOfFiredLoadEvents) {
  	console.log("PASS Fired " + numberOfFiredLoadEvents + " Load events.");
    test_end();
    // log("PASS Fired " + numberOfFiredLoadEvents + " Load events.");
    // testFinished();
  }
}
</script>
<style onload="checkIfDone('style1')"></style>
<style onload="checkIfDone('style2')"></style>
</head>
<body onload="checkIfDone('body')">
<p>This tests that we fire two Load events on a page with two HTML Style elements and that both events are fired before the Load event for the window is dispatched. This test PASSED if you see the word PASS below. Otherwise, it FAILED.
<pre id="console"></pre>
</body>
</html>
