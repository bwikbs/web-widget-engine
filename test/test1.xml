<?xml version="1.0" encoding="UTF-8"?>
<!--
// TODO -> implement units(color, length(px, dp, %...))
        -> implement container(Element-> Container? Layout? some thing
-->
<Document>
    <Text
        id = "taTest"
        textSize = "24"
        x = "0"
        y = "0"
        width="360"
        height="40"
        text = "left"
        textAlign = "left"
    />
    <Element
        id="backgroundTest"
        x = "0"
        y = "40"
        width="50"
        height="50"
        background="rgba(255,255,255,255)"
        backgroundWhenActive="url(test/sun.png)"
    />
    
    <Element
        id="backgroundTest2"
        x = "0"
        y = "90"
        width="50"
        height="50"
        background="url(test/sun.png)"
        backgroundWhenActive="rgba(0,0,0,0)"
    >
        <Text
        x = "0"
        y = "0"
        width = "50"
        height = "50"
        text = "test"
        textColor = "rgba(255,0,0,255)"
        />
    </Element>

    <Text
        id = "hour1"
        textSize = "48"
        x = "60"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "hour2"
        textSize = "48"
        x = "90"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        textSize = "48"
        x = "120"
        y = "45"
        width="20"
        height="40"
        text = ":"
    />
    <Text
        id = "min1"
        textSize = "48"
        x = "140"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "min2"
        textSize = "48"
        x = "170"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        textSize = "48"
        x = "200"
        y = "45"
        width="20"
        height="40"
        text = ":"
    />
    <Text
        id = "sec1"
        textSize = "48"
        x = "220"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Text
        id = "sec2"
        textSize = "48"
        x = "250"
        y = "45"
        width="30"
        height="40"
        text = "0"
    />
    <Image
        id="sun"
        src = "test/sun.png"
        x = "55"
        y = "110"
        width = "240"
        height = "205"
    />
    <Script>
        <![CDATA[
        
        function textSetter(a1, a2, time) {
            a1.text = parseInt(time / 10);
            a2.text = time % 10;
        }
        function timeoutHander() {
            // print("timeout")
            
            var d = new Date();
            textSetter(document.getElementById("hour1"), document.getElementById("hour2"), d.getHours());
            textSetter(document.getElementById("min1"), document.getElementById("min2"), d.getMinutes());
            textSetter(document.getElementById("sec1"), document.getElementById("sec2"), d.getSeconds());
            
            window.setTimeout(timeoutHander, 500);
        }
        
        timeoutHander();
        
        function ani() {
            var t = new Date();
            t = t.valueOf()
            t = t % 1000000
            // t = t % 3600
            // print(t)
            document.getElementById("sun").angle = t/80;
            
            var now = Date.now();
            var c = 500;
            if (now - startTime > c) {
                document.getElementById("sun").scale = 1;
            } else 
                document.getElementById("sun").scale = 1 + Math.sin( ((now - startTime) / c * 180) * Math.PI / 180) * 0.25;
            window.setTimeout(ani, 13);
        }
        
        var startTime = Date.now()
        
        document.getElementById("sun").onClick = function() {
            startTime = Date.now();
        }
        
        ani()
        
        document.getElementById("hour1").onClick = function() {
            print(this.textColor)
            this.textColor = "rgba(255,0,0,255)";
        }
        
        document.getElementById("taTest").onClick = function() {
            print(this.textAlign);
            if (this.textAlign == "left") {
                this.text = this.textAlign = "center"
            } else if (this.textAlign == "center") {
                this.text = this.textAlign = "right"
            } else if (this.textAlign == "right") {
                this.text = this.textAlign = "left"
            }
        }

	window.onKeyDown = function(e) {
		print("down")
		print(e);
	}
	window.onKeyUp = function(e) {
		print("up")
		print(e);
	}
        ]]>
    </Script>
</Document>
