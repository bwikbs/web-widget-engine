<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<style>
		* {
			margin: 0;
			padding: 0;
		}

		body {
		    position: absolute;
			width: 360px;
			height: 360px;
		    font-size: 2.125em;
		    color: white;
			background-color: black;
		}

		#box {
			display: block;
			margin-top: 40px;
			padding-left: 30px;
			padding-right: 30px;
		}

		.wrapper_inlineBlock {
			display: inline-block;
			width: 48%;
			text-align: center;
		}

		.img_text {
			text-align: center;
		    font-size: 50px;
		    font-weight: bold;
		    margin-top: -90px;
		}

		.plus_text {
			display: block;
			text-align: center;
			font-size: 90px;
			font-weight: 700;
			margin-top: 20px;
		}

		.plus_text:active {
			color: gray;
		}

		img {
			width: 100%;

		}

		#img_coffee {
			margin-left: 10px;
		}

		#img_coffee_tag {
			margin-left:-6px;
		}
		</style>
	</head>
	<body>
	    <div id="box"> 
	        <div id="water_area" class="wrapper_inlineBlock">
	    		<img id="img_water" src="images/water0.png">
	    		<div class="img_text" id="img_water_tag">1</div>
	    		<div class="plus_text" id="plus_water"> + </div>
	    	</div>
	    	<div id="coffee_area" class="wrapper_inlineBlock">
	    		<img id="img_coffee" src="images/coffee0.png">
	    		<div class="img_text" id="img_coffee_tag">2</div>
	    		<div class="plus_text" id="plus_coffee"> + </div>
	    	</div>
	    </div>
	</body>
	<script>
	var anim = function(kind, max_scene) {
		this.INTERVAL = 50;
		this.IMG_MAX = max_scene;
		this.imgElement = document.getElementById("img_" + kind);
		this.textElement = document.getElementById("img_" + kind + "_tag");
		this.currentIndex = 0;
		this.animing = false;
		this.forceStop = false;
		this.goAnim = function() {
			if (this.animing) {
				if (this.currentIndex > (this.IMG_MAX / 2)) this.currentIndex = 0;
			} else {
				this.animing = true;
				var that = this;
				var nextscene = requestAnimationFrame.bind(undefined, function() {
					if (that.forceStop || that.currentIndex == that.IMG_MAX) {
						that.forceStop = false;
						that.animing = false;
						that.currentIndex = 0;
						that.imgElement.src = "images/" + kind + "0.png";
						return;
					}
					that.currentIndex++;
					that.imgElement.src = "images/" + kind + that.currentIndex + ".png";
					nextscene();
					// console.log("hello");
				});
				nextscene();
			}
		};
		this.stopAnim = function() {
			this.forceStop = true;
		};
		document.getElementById(kind + "_area").onclick = function(event) {
			this.goAnim();
			this.textElement.textContent = parseInt(this.textElement.textContent) + 1;
		}.bind(this);
	};

	var water = new anim("water", 11);
	var coffee = new anim("coffee", 11);
	</script>
</html>
